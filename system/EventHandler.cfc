<!-----------------------------------------------------------------------********************************************************************************Copyright 2005-2008 ColdBox Framework by Luis Majano and Ortus Solutions, Corpwww.coldboxframework.com | www.luismajano.com | www.ortussolutions.com********************************************************************************Author 	    :	Luis MajanoDate        :	September 23, 2005Description :	This is a cfc that all event handlers should extendModification History:01/12/2006 - Added fix for whitespace management.06/08/2006 - Updated for coldbox07/29/2006 - Datasource support via getdatsource()-----------------------------------------------------------------------><cfcomponent name="eventhandler"			 hint="This is the event handler base cfc."			 output="false"			 extends="coldbox.system.FrameworkSupertype"			 serializable="false"><!------------------------------------------- CONSTRUCTOR ------------------------------------------->	<!--- Public Exposed Functionality Properties --->	<cfscript>		this.event_cache_suffix = "";		this.prehandler_only 	= "";		this.prehandler_except 	= "";		this.posthandler_only 	= "";		this.posthandler_except = "";		this.allowedMethods = structnew();		this.defaultAction 		= "";	</cfscript>		<cffunction name="init" access="public" returntype="any" output="false" hint="The event handler controller">		<cfargument name="controller" type="any" required="true" hint="coldbox.system.Controller">		<cfscript>			// Register Controller			variables.controller = arguments.controller;			// Register ColdBox			variables.logBox = arguments.controller.getLogBox();						// Inject user dependencies.			if(Len(Trim(getController().getSetting("UDFLibraryFile")))){				includeUDF(getController().getSetting("UDFLibraryFile"));			}						return this;		</cfscript>	</cffunction><!------------------------------------------- PUBLIC ------------------------------------------->		<!--- _actionExists --->
    <cffunction name="_actionExists" output="false" access="public" returntype="boolean" hint="Checks if an action is defined, either public or private">
    	<cfargument name="action" type="string" required="true" hint="The action to search for"/>    	<cfreturn ( structKeyExists(this,arguments.action) OR structKeyExists(variables,arguments.action) )>    </cffunction>	<!--- Invoker Mixin --->	<cffunction name="_privateInvoker" hint="calls private/packaged/public methods. Used internally by coldbox to execute private events" access="public" returntype="any" output="false">		<!--- ************************************************************* --->		<cfargument name="method" 		 type="string" required="Yes" hint="Name of the method to call">		<cfargument name="argCollection" type="struct" required="No"  hint="Can be called with an argument collection struct">		<cfargument name="argList" 		 type="string" required="No"  hint="Can be called with an argument list, for simple values only: ex: 'plugin=logger,number=1'">		<!--- ************************************************************* --->		<cfset var results = "">		<cfset var key = "">				<!--- Determine type of invocation --->		<cfif structKeyExists(arguments,"argCollection")>			<cfinvoke method="#arguments.method#" 					  returnvariable="results" 					  argumentcollection="#arguments.argCollection#" />		<cfelseif structKeyExists(arguments, "argList")>			<cfinvoke method="#arguments.method#" 					  returnvariable="results">				<cfloop list="#argList#" index="key">					<cfinvokeargument name="#listFirst(key,'=')#" value="#listLast(key,'=')#">				</cfloop>			</cfinvoke>		<cfelse>			<cfinvoke method="#arguments.method#" 					  returnvariable="results" />		</cfif>				<!--- Return results if Found --->		<cfif isDefined("results")>			<cfreturn results>		</cfif>	</cffunction><!------------------------------------------- PRIVATE -------------------------------------------></cfcomponent>